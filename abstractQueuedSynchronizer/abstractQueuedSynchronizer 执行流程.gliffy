{"contentType":"application/gliffy+json","version":"1.1","metadata":{"title":"untitled","revision":0,"exportBorder":false},"embeddedResources":{"index":0,"resources":[]},"stage":{"objects":[{"x":1105,"y":2168,"rotation":0,"id":141,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":141,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[0,-3],[0,32],[0,67],[0,102]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":134,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":137,"px":0.5,"py":0}}},"linkMap":[]},{"x":1103,"y":1987,"rotation":0,"id":140,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":140,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2,-2],[2,33],[2,68],[2,103]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":128,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":134,"px":0.5,"py":0}}},"linkMap":[]},{"x":1000,"y":2270,"rotation":0,"id":137,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":210,"height":75,"lockAspectRatio":false,"lockShape":false,"order":137,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":4.199999999999998,"y":0,"rotation":0,"id":139,"uid":null,"width":201.59999999999994,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">LockSupport.unpark(s.thread)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">唤醒当前线程</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1050,"y":2090,"rotation":0,"id":134,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":110.00000000000001,"height":75,"lockAspectRatio":false,"lockShape":false,"order":134,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.2,"y":0,"rotation":0,"id":136,"uid":null,"width":105.60000000000001,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">找到下一个状态正常的节点</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1103.2000122070312,"y":1787.4000244140625,"rotation":0,"id":133,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":133,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[6.79998779296875,-2.4000244140625],[6.79998779296875,39.29996226326011],[6.79998779296875,80.99994894058295],[6.79998779296875,122.69993561790557]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":125,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":128,"px":0.5,"py":0}}},"linkMap":[]},{"x":1113.2000122070312,"y":1574.4000244140625,"rotation":0,"id":132,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":132,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[1.79998779296875,0.5999755859375],[1.79998779296875,45.630829206291764],[1.79998779296875,90.66168282664626],[1.79998779296875,135.69253644700052]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":122,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":125,"px":0.5,"py":0}}},"linkMap":[]},{"x":1010,"y":1910,"rotation":0,"id":128,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":190,"height":75,"lockAspectRatio":false,"lockShape":false,"order":69,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.7999999999999994,"y":0,"rotation":0,"id":130,"uid":null,"width":182.39999999999995,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\"> unparkSuccessor(h)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">唤醒后继线程</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1020,"y":1710,"rotation":0,"id":125,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":180,"height":75,"lockAspectRatio":false,"lockShape":false,"order":67,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.6000000000000005,"y":0,"rotation":0,"id":127,"uid":null,"width":172.79999999999998,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">tryRelease(arg)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1030,"y":1500,"rotation":0,"id":122,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":170,"height":75,"lockAspectRatio":false,"lockShape":false,"order":65,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.399999999999999,"y":0,"rotation":0,"id":124,"uid":null,"width":163.19999999999996,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\"> release(int arg)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1090.4000244140625,"y":1119,"rotation":0,"id":79,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":48,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[-0.4000244140625,1],[-0.4000244140625,47.69641908707308],[-0.4000244140625,94.39283817414594],[-0.4000244140625,141.08925726121902]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":61,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":67,"px":0.5,"py":0}}},"linkMap":[]},{"x":1087.4000244140625,"y":920,"rotation":0,"id":78,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":47,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2.5999755859375,0],[2.5999755859375,33.33333333333337],[2.5999755859375,66.66666666666663],[2.5999755859375,100]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":58,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":61,"px":0.5,"py":0}}},"linkMap":[]},{"x":1092.4000244140625,"y":540,"rotation":0,"id":77,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":46,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2.5999755859375,0],[2.5999755859375,36.66666666666663],[2.5999755859375,73.33333333333337],[2.5999755859375,110]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":51,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":55,"px":0.5,"py":0}}},"linkMap":[]},{"x":930,"y":1260,"rotation":0,"id":67,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":310,"height":90,"lockAspectRatio":false,"lockShape":false,"order":42,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":6.199999999999996,"y":0,"rotation":0,"id":74,"uid":null,"width":297.59999999999985,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">shouldParkAfterFailedAcquire(p, node) &amp;&amp;\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">                    parkAndCheckInterrupt()\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\"></span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":930,"y":840,"rotation":0,"id":58,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":320,"height":80,"lockAspectRatio":false,"lockShape":false,"order":36,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":6.399999999999997,"y":0,"rotation":0,"id":60,"uid":null,"width":307.1999999999999,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">Node p = node.predecessor()\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">p == head &amp;&amp; tryAcquire(arg)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">当前节点的前驱是头节点 ，尝试去设置状态\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\"></span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1040,"y":650,"rotation":0,"id":55,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":110.00000000000001,"height":75,"lockAspectRatio":false,"lockShape":false,"order":34,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.2,"y":0,"rotation":0,"id":57,"uid":null,"width":105.60000000000001,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">for ( ; ;)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1250,"y":460,"rotation":0,"id":54,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":142,"height":40,"lockAspectRatio":false,"lockShape":false,"order":33,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 18px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; font-weight: bold; line-height: 20.5px;\">☆ ☆ ☆</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":940,"y":460,"rotation":0,"id":51,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":310,"height":80,"lockAspectRatio":false,"lockShape":false,"order":31,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":6.1999999999999975,"y":0,"rotation":0,"id":53,"uid":null,"width":297.6,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">acquireQueued(final Node node, int arg)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">已经入队的 node ， 从队列中获取 state</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":318,"y":1024,"rotation":0,"id":47,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":29,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2,-1.5],[2,31],[2,63.5],[2,96]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":50,"uid":null,"width":10,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">N</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":34,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":40,"px":0.5,"py":0}}},"linkMap":[]},{"x":377,"y":973,"rotation":0,"id":46,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":27,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[-2,-0.5],[40.5,-0.5],[83,-0.5],[125.5,-0.5]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":49,"uid":null,"width":10,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">Y</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":34,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":37,"px":0,"py":0.5}}},"linkMap":[]},{"x":321,"y":851,"rotation":0,"id":45,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":26,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[-1,-6],[-1,19.83333333333337],[-1,45.66666666666663],[-1,71.5]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":25,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":34,"px":0.5,"py":0}}},"linkMap":[]},{"x":320,"y":699,"rotation":0,"id":44,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":25,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[0,-4],[0,21],[0,46],[0,71]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":22,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":25,"px":0.5,"py":0}}},"linkMap":[]},{"x":318,"y":539,"rotation":0,"id":43,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":24,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2,-4],[2,24.33333333333337],[2,52.66666666666663],[2,81]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":19,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":22,"px":0.5,"py":0}}},"linkMap":[]},{"x":200,"y":1120,"rotation":0,"id":40,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":240,"height":75,"lockAspectRatio":false,"lockShape":false,"order":22,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":4.799999999999999,"y":0,"rotation":0,"id":42,"uid":null,"width":230.39999999999995,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">enq(node)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">通过死循环 cas 将此节点压入队列</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":502.5,"y":935,"rotation":0,"id":37,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":130,"height":75,"lockAspectRatio":false,"lockShape":false,"order":20,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.5999999999999996,"y":0,"rotation":0,"id":39,"uid":null,"width":124.8,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">返回当前此节点</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":265,"y":922.5,"rotation":0,"id":34,"uid":"com.gliffy.shape.flowchart.flowchart_v1.default.decision","width":110.00000000000001,"height":100,"lockAspectRatio":false,"lockShape":false,"order":18,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.diamond.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.2,"y":0,"rotation":0,"id":36,"uid":null,"width":105.60000000000001,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">成功 Y / N</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":22,"y":90,"rotation":0,"id":32,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":470,"height":80,"lockAspectRatio":false,"lockShape":false,"order":17,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">1. node 是一个 FIFO 的队列 ， 从尾部入队  ，从头部出队\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">CANCELLED =  1\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">SIGNAL    = -1\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">CONDITION = -2\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">PROPAGATE = -3</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":20,"y":50,"rotation":0,"id":28,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":156,"height":50,"lockAspectRatio":false,"lockShape":false,"order":16,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 18px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; font-weight: bold; line-height: 20.5px;\">此类的要点</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":32,"y":15.5,"rotation":0,"id":0,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":340,"height":32,"lockAspectRatio":false,"lockShape":false,"order":0,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">abstractQueuedSynchronizer 源码执行流程分析</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":550,"y":310,"rotation":0,"id":9,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":376,"height":50,"lockAspectRatio":false,"lockShape":false,"order":6,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">如果 tryAcquire 失败 ， 并且加入等待队列成功\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">则 自我中断 ， 设置中断标志位</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":754.6000061035156,"y":84,"rotation":0,"id":8,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":5,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[0.399993896484375,-4],[0.399993896484375,26],[0.399993896484375,56],[0.399993896484375,86]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":1,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":4,"px":0.5,"py":0}}},"linkMap":[]},{"x":550,"y":170,"rotation":0,"id":4,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":410,"height":110.00000000000001,"lockAspectRatio":false,"lockShape":false,"order":3,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":8.199999999999998,"y":0,"rotation":0,"id":6,"uid":null,"width":393.59999999999997,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">if (!tryAcquire(arg) &amp;&amp;\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">            acquireQueued(addWaiter(Node.EXCLUSIVE), arg))\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">            selfInterrupt();</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":665,"y":20,"rotation":0,"id":1,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":180,"height":60,"lockAspectRatio":false,"lockShape":false,"order":1,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.6000000000000005,"y":0,"rotation":0,"id":3,"uid":null,"width":172.79999999999998,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">acquire(int arg)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":180,"y":770,"rotation":0,"id":25,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":280,"height":75,"lockAspectRatio":false,"lockShape":false,"order":14,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":5.600000000000001,"y":0,"rotation":0,"id":33,"uid":null,"width":268.79999999999995,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">compareAndSetTail(pred, node)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">尝试直接  cas 将此节点放到队列尾部</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":137.5,"y":620,"rotation":0,"id":22,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":364.99999999999994,"height":75,"lockAspectRatio":false,"lockShape":false,"order":12,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":7.3,"y":0,"rotation":0,"id":24,"uid":null,"width":350.3999999999999,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(67, 67, 67); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">Node node = new Node(Thread.currentThread(), mode)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(67, 67, 67); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">构造一个 node</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":230,"y":460,"rotation":0,"id":19,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":180,"height":75,"lockAspectRatio":false,"lockShape":false,"order":10,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.5999999999999988,"y":0,"rotation":0,"id":21,"uid":null,"width":172.79999999999995,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(67, 67, 67); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">addWaiter(Node mode)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1150,"y":120,"rotation":0,"id":17,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":376,"height":64,"lockAspectRatio":false,"lockShape":false,"order":9,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">1. 首先获取当前 state ，如果 state ==0 ，并且当前线程成功 cas state 为 1 ，则返回 true\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">2. 如果当前线程已经设置过状态  ， 则可重入。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1200,"y":20,"rotation":0,"id":10,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":200,"height":75,"lockAspectRatio":false,"lockShape":false,"order":7,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.9999999999999982,"y":0,"rotation":0,"id":12,"uid":null,"width":191.99999999999994,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">tryAcquire(int acquires)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1133.5999755859375,"y":1072,"rotation":0,"id":69,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":44,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[6.4000244140625,-2],[56.4000244140625,-2],[106.4000244140625,-2],[156.4000244140625,-2]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":70,"uid":null,"width":10,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">Y</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":61,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":65,"px":0,"py":0.5}}},"linkMap":[]},{"x":1290,"y":1032.5,"rotation":0,"id":65,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":100,"height":75,"lockAspectRatio":false,"lockShape":false,"order":40,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2,"y":0,"rotation":0,"id":71,"uid":null,"width":96,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">返回  false </span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1040,"y":1020,"rotation":0,"id":61,"uid":"com.gliffy.shape.flowchart.flowchart_v1.default.decision","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":38,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.diamond.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2,"y":0,"rotation":0,"id":64,"uid":null,"width":96,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">成功 Y / N</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1280,"y":580,"rotation":0,"id":115,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":260,"height":40,"lockAspectRatio":false,"lockShape":false,"order":60,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">1. 已经在等待队列中 ， 尝试设置状态</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1279.2000122070312,"y":1257.4000244140625,"rotation":0,"id":116,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":260,"height":112,"lockAspectRatio":false,"lockShape":false,"order":61,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">使当前线程阻塞\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">parkAndCheckInterrupt()\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">LockSupport.park(this);\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">return Thread.interrupted()\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\"></span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":271,"y":1822.800048828125,"rotation":0,"id":118,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":63,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[-1,-2.800048828125],[-1,36.199951171875],[-1,75.199951171875],[-1,114.199951171875]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":119,"uid":null,"width":10,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">N</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":97,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":103,"px":0.5,"py":0}}},"linkMap":[]},{"x":265,"y":1601.800048828125,"rotation":0,"id":117,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":62,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[5,-1.800048828125],[5,38.199951171875],[5,78.199951171875],[5,118.199951171875]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":81,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":97,"px":0.5,"py":0}}},"linkMap":[]},{"x":390,"y":1965,"rotation":0,"id":112,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":190,"height":16,"lockAspectRatio":false,"lockShape":false,"order":59,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">寻找一个安全的休息点</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":389.79999923706055,"y":1768,"rotation":0,"id":108,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":57,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[0.11669056490313778,-3],[50.14446063091526,-3],[100.17223069692733,-3],[150.20000076293945,-3]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":109,"uid":null,"width":10,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">Y</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":97,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":105,"px":0,"py":0.5}}},"linkMap":[]},{"x":540,"y":1720,"rotation":0,"id":105,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":140,"height":90,"lockAspectRatio":false,"lockShape":false,"order":55,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.7999999999999985,"y":0,"rotation":0,"id":107,"uid":null,"width":134.39999999999998,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">前驱节点是 signal ， 可安全地阻塞自己\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">进行等待</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":150,"y":1937,"rotation":0,"id":103,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":240,"height":130,"lockAspectRatio":false,"lockShape":false,"order":53,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":4.8,"y":0,"rotation":0,"id":111,"uid":null,"width":230.40000000000006,"height":80,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">do {\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">                node.prev = pred = pred.prev;\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">            } while (pred.waitStatus &gt; 0);\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">            pred.next = node</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":150,"y":1720,"rotation":0,"id":97,"uid":"com.gliffy.shape.flowchart.flowchart_v1.default.decision","width":240,"height":100,"lockAspectRatio":false,"lockShape":false,"order":51,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.diamond.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":4.799999999999998,"y":0,"rotation":0,"id":99,"uid":null,"width":230.39999999999992,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">int ws = pred.waitStatus\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">ws == Node.SIGNAL</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":80,"y":1530,"rotation":0,"id":81,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":380,"height":70,"lockAspectRatio":false,"lockShape":false,"order":49,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":7.599999999999996,"y":0,"rotation":0,"id":83,"uid":null,"width":364.8,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">shouldParkAfterFailedAcquire(Node pred, Node node)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">当一个节点没有获取到状态时 ，执行此方法\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">返回 true ， 当前节点应该阻塞</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1281.2000122070312,"y":1500,"rotation":0,"id":131,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":260,"height":37.5,"lockAspectRatio":false,"lockShape":false,"order":71,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">释放锁</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]}],"background":"#FFFFFF","width":1540,"height":2345,"maxWidth":5000,"maxHeight":5000,"nodeIndex":142,"autoFit":true,"exportBorder":false,"gridOn":true,"snapToGrid":true,"drawingGuidesOn":true,"pageBreaksOn":false,"printGridOn":false,"printPaper":"LETTER","printShrinkToFit":false,"printPortrait":true,"shapeStyles":{"com.gliffy.shape.basic.basic_v1.default":{"fill":"#FFFFFF","stroke":"#333333","strokeWidth":2},"com.gliffy.shape.flowchart.flowchart_v1.default":{"fill":"#FFFFFF","stroke":"#333333","strokeWidth":2}},"lineStyles":{"global":{"endArrow":1}},"textStyles":{},"themeData":null}}