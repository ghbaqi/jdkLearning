{"contentType":"application/gliffy+json","version":"1.1","metadata":{"title":"untitled","revision":0,"exportBorder":false},"embeddedResources":{"index":0,"resources":[]},"stage":{"objects":[{"x":58,"y":1650,"rotation":0,"id":172,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":371,"height":32,"lockAspectRatio":false,"lockShape":false,"order":96,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">当前线程会一直持有状态 ， 其它竞争这个锁的线程。会饥饿，一直在 for 循环中尝试获取锁。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":32,"y":15.5,"rotation":0,"id":0,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":340,"height":32,"lockAspectRatio":false,"lockShape":false,"order":0,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">abstractQueuedSynchronizer 源码执行流程分析</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1410,"y":139.5,"rotation":0,"id":17,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":376,"height":96,"lockAspectRatio":false,"lockShape":false,"order":9,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">0. hasQueuedPredecessors   ?\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">1. 首先获取当前 state ，如果 state ==0 ，并且当前线程成功 cas state 为 1 ，则返回 true\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">2. 如果当前线程已经设置过状态  ， 则可重入。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1460,"y":39.5,"rotation":0,"id":10,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":200,"height":75,"lockAspectRatio":false,"lockShape":false,"order":7,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.9999999999999982,"y":0,"rotation":0,"id":12,"uid":null,"width":191.99999999999994,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">tryAcquire(int acquires)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":810,"y":329.5,"rotation":0,"id":9,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":376,"height":32,"lockAspectRatio":false,"lockShape":false,"order":6,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">如果 tryAcquire 失败 ， 并且加入等待队列成功\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 255); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">则 自我中断 ， 设置中断标志位</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1014.6000061035156,"y":103.5,"rotation":0,"id":8,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":5,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[0.399993896484375,-4],[0.399993896484375,26],[0.399993896484375,56],[0.399993896484375,86]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":1,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":4,"px":0.5,"py":0}}},"linkMap":[]},{"x":810,"y":189.5,"rotation":0,"id":4,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":410,"height":110.00000000000001,"lockAspectRatio":false,"lockShape":false,"order":3,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":8.199999999999998,"y":0,"rotation":0,"id":6,"uid":null,"width":393.59999999999997,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">if (!tryAcquire(arg) &amp;&amp;\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">            acquireQueued(addWaiter(Node.EXCLUSIVE), arg))\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">            selfInterrupt();</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":925,"y":39.5,"rotation":0,"id":1,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":180,"height":60,"lockAspectRatio":false,"lockShape":false,"order":1,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.6000000000000005,"y":0,"rotation":0,"id":3,"uid":null,"width":172.79999999999998,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">acquire(int arg)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1741.2000122070312,"y":1510,"rotation":0,"id":131,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":260,"height":16,"lockAspectRatio":false,"lockShape":false,"order":71,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">释放锁</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1920,"y":1280,"rotation":0,"id":116,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":260,"height":112,"lockAspectRatio":false,"lockShape":false,"order":61,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">使当前线程阻塞\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">parkAndCheckInterrupt()\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">LockSupport.park(this);\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">return Thread.interrupted()\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\"></span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1740,"y":590,"rotation":0,"id":115,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":260,"height":16,"lockAspectRatio":false,"lockShape":false,"order":60,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">1. 已经在等待队列中 ， 尝试设置状态</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":540,"y":1540,"rotation":0,"id":81,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":380,"height":70,"lockAspectRatio":false,"lockShape":false,"order":49,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":7.599999999999996,"y":0,"rotation":0,"id":83,"uid":null,"width":364.8,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">shouldParkAfterFailedAcquire(Node pred, Node node)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">当一个节点没有获取到状态时 ，执行此方法\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">返回 true ， 当前节点应该阻塞</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":56.5,"y":493.5,"rotation":0,"id":143,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":460,"height":352,"lockAspectRatio":false,"lockShape":false,"order":83,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">0. 使用 node 的队列实现阻塞同步器 ， 线程的状态存储在 node 中。\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">   status 是表示了线程是否应该阻塞的标志位\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">1. 当一个 node 的前驱释放了锁 , 它就会被唤醒\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">2. 如果一个节点成为头结点 , 它就会尝试去获取 , \n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">   但不一定会获取成功 , 获取失败 , 就需要重新等待\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">3. 从 tail 入队 , 从 head 出队\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">4. 维护 prev 节点 , 主要是为了解决 线程 cancel 的情况 。 \n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">    如果一个节点 cancel  了  , 那么它的后继节点需要重新指 \n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">    向一个状态正常的前驱节点\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">5. 维护 next , 使我们不需要每次都向后遍历一遍\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">6. 当 cancel 一个节点时 , 会 unpark 它的后继节点\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">7. 线程在等待 condition 时 , 使用相同的 node  , 等待时 节点插入等待队列 , 唤醒时 , 从等待队列出队\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\"></span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":40,"y":453.5,"rotation":0,"id":144,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":102,"height":16,"lockAspectRatio":false,"lockShape":false,"order":82,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; line-height: 16.5px;\">Node</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":54.5,"y":300.5,"rotation":0,"id":145,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":460,"height":128,"lockAspectRatio":false,"lockShape":false,"order":81,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">1. 依赖一个 FIFO 队列  , 实现线程阻塞锁 。是实现其它同步工具的基础 , eg : semaphore  countdownLatch 等 。\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">2. 通常情况下子类继承它 , 并且作为内部类来使用。\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">3. 具有排它模式和共享模式\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; text-decoration: none; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; line-height: 16.5px; color: rgb(0, 0, 0);\">4. Condition</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":59,"y":259.5,"rotation":0,"id":146,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":102,"height":16,"lockAspectRatio":false,"lockShape":false,"order":80,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; line-height: 16.5px;\">简介</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":60,"y":134.5,"rotation":0,"id":32,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":470,"height":80,"lockAspectRatio":false,"lockShape":false,"order":17,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">1. node 是一个 FIFO 的队列 ， 从尾部入队  ，从头部出队\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">CANCELLED =  1\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">SIGNAL    = -1\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">CONDITION = -2\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(0, 255, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">PROPAGATE = -3</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":34,"y":69.5,"rotation":0,"id":28,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":156,"height":20,"lockAspectRatio":false,"lockShape":false,"order":16,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 18px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; font-weight: bold; line-height: 20.5px;\">此类的要点</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":40,"y":932.5,"rotation":0,"id":155,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":307,"height":16,"lockAspectRatio":false,"lockShape":false,"order":85,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">1.  排它锁和共享锁分别都是怎么实现的 ？</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":42,"y":890,"rotation":0,"id":154,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":100,"height":20,"lockAspectRatio":false,"lockShape":false,"order":84,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 18px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; font-weight: bold; line-height: 20.5px;\">问题</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1747.5,"y":2188,"rotation":0,"id":141,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":79,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[0,-3],[0,32],[0,67],[0,102]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":134,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":137,"px":0.5,"py":0}}},"linkMap":[]},{"x":1745.5,"y":2007,"rotation":0,"id":140,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":78,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2,-2],[2,33],[2,68],[2,103]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":128,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":134,"px":0.5,"py":0}}},"linkMap":[]},{"x":1642.5,"y":2290,"rotation":0,"id":137,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":210,"height":75,"lockAspectRatio":false,"lockShape":false,"order":76,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":4.199999999999998,"y":0,"rotation":0,"id":139,"uid":null,"width":201.59999999999994,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">LockSupport.unpark(s.thread)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">唤醒当前线程</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1692.5,"y":2110,"rotation":0,"id":134,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":110.00000000000001,"height":75,"lockAspectRatio":false,"lockShape":false,"order":74,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.2,"y":0,"rotation":0,"id":136,"uid":null,"width":105.60000000000001,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">找到下一个状态正常的节点</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1745.7000122070312,"y":1807.4000244140625,"rotation":0,"id":133,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":73,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[6.79998779296875,-2.4000244140625],[6.79998779296875,39.29996226326011],[6.79998779296875,80.99994894058295],[6.79998779296875,122.69993561790557]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":125,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":128,"px":0.5,"py":0}}},"linkMap":[]},{"x":1755.7000122070312,"y":1594.4000244140625,"rotation":0,"id":132,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":72,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[1.79998779296875,0.5999755859375],[1.79998779296875,45.630829206291764],[1.79998779296875,90.66168282664626],[1.79998779296875,135.69253644700052]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":122,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":125,"px":0.5,"py":0}}},"linkMap":[]},{"x":1652.5,"y":1930,"rotation":0,"id":128,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":190,"height":75,"lockAspectRatio":false,"lockShape":false,"order":69,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.7999999999999994,"y":0,"rotation":0,"id":130,"uid":null,"width":182.39999999999995,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\"> unparkSuccessor(h)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">唤醒后继线程</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1662.5,"y":1730,"rotation":0,"id":125,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":180,"height":75,"lockAspectRatio":false,"lockShape":false,"order":67,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.6000000000000005,"y":0,"rotation":0,"id":127,"uid":null,"width":172.79999999999998,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">tryRelease(arg)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1672.5,"y":1520,"rotation":0,"id":122,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":170,"height":75,"lockAspectRatio":false,"lockShape":false,"order":65,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.399999999999999,"y":0,"rotation":0,"id":124,"uid":null,"width":163.19999999999996,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\"> release(int arg)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":913.5,"y":1842.800048828125,"rotation":0,"id":118,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":63,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[-1,-2.800048828125],[-1,36.199951171875],[-1,75.199951171875],[-1,114.199951171875]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":119,"uid":null,"width":10,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">N</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":97,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":103,"px":0.5,"py":0}}},"linkMap":[]},{"x":907.5,"y":1621.800048828125,"rotation":0,"id":117,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":62,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[-177.5,-11.800048828125],[-177.5,53.199951171875],[5,53.199951171875],[5,118.199951171875]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":81,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":97,"px":0.5,"py":0}}},"linkMap":[]},{"x":1032.5,"y":1985,"rotation":0,"id":112,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":190,"height":16,"lockAspectRatio":false,"lockShape":false,"order":59,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">寻找一个安全的休息点</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1032.2999992370605,"y":1788,"rotation":0,"id":108,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":57,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[0.11669056490313778,-3],[50.14446063091532,-3],[100.17223069692727,-3],[150.20000076293945,-3]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":109,"uid":null,"width":9,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">Y</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":97,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":105,"px":0,"py":0.5}}},"linkMap":[]},{"x":1182.5,"y":1740,"rotation":0,"id":105,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":140,"height":90,"lockAspectRatio":false,"lockShape":false,"order":55,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.7999999999999985,"y":0,"rotation":0,"id":107,"uid":null,"width":134.39999999999998,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">前驱节点是 signal ， 可安全地阻塞自己\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">进行等待</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":792.5,"y":1957,"rotation":0,"id":103,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":240,"height":130,"lockAspectRatio":false,"lockShape":false,"order":53,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":4.8,"y":0,"rotation":0,"id":111,"uid":null,"width":230.40000000000006,"height":80,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">do {\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">                node.prev = pred = pred.prev;\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">            } while (pred.waitStatus &gt; 0);\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">            pred.next = node</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":792.5,"y":1740,"rotation":0,"id":97,"uid":"com.gliffy.shape.flowchart.flowchart_v1.default.decision","width":240,"height":100,"lockAspectRatio":false,"lockShape":false,"order":51,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.diamond.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":4.799999999999998,"y":0,"rotation":0,"id":99,"uid":null,"width":230.39999999999992,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">int ws = pred.waitStatus\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">ws == Node.SIGNAL</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1732.9000244140625,"y":1139,"rotation":0,"id":79,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":48,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[-0.4000244140625,1],[-0.4000244140625,47.69641908707308],[-0.4000244140625,94.39283817414594],[-0.4000244140625,141.08925726121902]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":61,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":67,"px":0.5,"py":0}}},"linkMap":[]},{"x":1729.9000244140625,"y":940,"rotation":0,"id":78,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":47,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2.5999755859375,0],[2.5999755859375,33.33333333333337],[2.5999755859375,66.66666666666663],[2.5999755859375,100]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":58,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":61,"px":0.5,"py":0}}},"linkMap":[]},{"x":1734.9000244140625,"y":560,"rotation":0,"id":77,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":46,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2.5999755859375,0],[2.5999755859375,36.66666666666663],[2.5999755859375,73.33333333333337],[2.5999755859375,110]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":51,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":55,"px":0.5,"py":0}}},"linkMap":[]},{"x":1776.0999755859375,"y":1092,"rotation":0,"id":69,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":44,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[6.4000244140625,-2],[56.4000244140625,-2],[106.4000244140625,-2],[156.4000244140625,-2]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":70,"uid":null,"width":9,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">Y</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":61,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":65,"px":0,"py":0.5}}},"linkMap":[]},{"x":1572.5,"y":1280,"rotation":0,"id":67,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":310,"height":90,"lockAspectRatio":false,"lockShape":false,"order":42,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":6.199999999999996,"y":0,"rotation":0,"id":74,"uid":null,"width":297.59999999999985,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">shouldParkAfterFailedAcquire(p, node) &amp;&amp;\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">                    parkAndCheckInterrupt()\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\"></span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1932.5,"y":1052.5,"rotation":0,"id":65,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":100,"height":75,"lockAspectRatio":false,"lockShape":false,"order":40,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2,"y":0,"rotation":0,"id":71,"uid":null,"width":96,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">返回  false </span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1682.5,"y":1040,"rotation":0,"id":61,"uid":"com.gliffy.shape.flowchart.flowchart_v1.default.decision","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":38,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.diamond.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2,"y":0,"rotation":0,"id":64,"uid":null,"width":96,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">成功 Y / N</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1572.5,"y":860,"rotation":0,"id":58,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":320,"height":80,"lockAspectRatio":false,"lockShape":false,"order":36,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":6.399999999999997,"y":0,"rotation":0,"id":60,"uid":null,"width":307.1999999999999,"height":48,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">Node p = node.predecessor()\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">p == head &amp;&amp; tryAcquire(arg)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">当前节点的前驱是头节点 ，尝试去设置状态\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\"></span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1682.5,"y":670,"rotation":0,"id":55,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":110.00000000000001,"height":75,"lockAspectRatio":false,"lockShape":false,"order":34,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.2,"y":0,"rotation":0,"id":57,"uid":null,"width":105.60000000000001,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">for ( ; ;)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1582.5,"y":480,"rotation":0,"id":51,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":310,"height":80,"lockAspectRatio":false,"lockShape":false,"order":31,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":6.1999999999999975,"y":0,"rotation":0,"id":53,"uid":null,"width":297.6,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">acquireQueued(final Node node, int arg)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">已经入队的 node ， 从队列中获取 state</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":960.5,"y":1044,"rotation":0,"id":47,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":29,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2,-1.5],[2,31],[2,63.5],[2,96]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":50,"uid":null,"width":10,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">N</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":34,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":40,"px":0.5,"py":0}}},"linkMap":[]},{"x":1019.5,"y":993,"rotation":0,"id":46,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":27,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[-2,-0.5],[40.5,-0.5],[83,-0.5],[125.5,-0.5]],"lockSegments":{}}},"children":[{"x":0,"y":0,"rotation":0,"id":49,"uid":null,"width":9,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"both","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">Y</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":34,"px":1,"py":0.5}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":37,"px":0,"py":0.5}}},"linkMap":[]},{"x":963.5,"y":871,"rotation":0,"id":45,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":26,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[-1,-6],[-1,19.83333333333337],[-1,45.66666666666663],[-1,71.5]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":25,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":34,"px":0.5,"py":0}}},"linkMap":[]},{"x":962.5,"y":719,"rotation":0,"id":44,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":25,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[0,-4],[0,21],[0,46],[0,71]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":22,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":25,"px":0.5,"py":0}}},"linkMap":[]},{"x":960.5,"y":559,"rotation":0,"id":43,"uid":"com.gliffy.shape.basic.basic_v1.default.line","width":100,"height":100,"lockAspectRatio":false,"lockShape":false,"order":24,"graphic":{"type":"Line","Line":{"strokeWidth":2,"strokeColor":"#000000","fillColor":"none","dashStyle":null,"startArrow":0,"endArrow":1,"startArrowRotation":"auto","endArrowRotation":"auto","ortho":true,"interpolationType":"linear","cornerRadius":10,"controlPath":[[2,-4],[2,24.33333333333337],[2,52.66666666666663],[2,81]],"lockSegments":{}}},"children":null,"constraints":{"constraints":[],"startConstraint":{"type":"StartPositionConstraint","StartPositionConstraint":{"nodeId":19,"px":0.5,"py":1}},"endConstraint":{"type":"EndPositionConstraint","EndPositionConstraint":{"nodeId":22,"px":0.5,"py":0}}},"linkMap":[]},{"x":842.5,"y":1140,"rotation":0,"id":40,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":240,"height":75,"lockAspectRatio":false,"lockShape":false,"order":22,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":4.799999999999999,"y":0,"rotation":0,"id":42,"uid":null,"width":230.39999999999995,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">enq(node)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">通过死循环 cas 将此节点压入队列</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":1145,"y":955,"rotation":0,"id":37,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":130,"height":75,"lockAspectRatio":false,"lockShape":false,"order":20,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.5999999999999996,"y":0,"rotation":0,"id":39,"uid":null,"width":124.8,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">返回当前此节点</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":907.5,"y":942.5,"rotation":0,"id":34,"uid":"com.gliffy.shape.flowchart.flowchart_v1.default.decision","width":110.00000000000001,"height":100,"lockAspectRatio":false,"lockShape":false,"order":18,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.diamond.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":2.2,"y":0,"rotation":0,"id":36,"uid":null,"width":105.60000000000001,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">成功 Y / N</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":822.5,"y":790,"rotation":0,"id":25,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":280,"height":75,"lockAspectRatio":false,"lockShape":false,"order":14,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":5.600000000000001,"y":0,"rotation":0,"id":33,"uid":null,"width":268.79999999999995,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">compareAndSetTail(pred, node)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; white-space: pre-wrap; text-decoration: none; line-height: 16.5px; color: rgb(0, 0, 0);\">尝试直接  cas 将此节点放到队列尾部</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":780,"y":640,"rotation":0,"id":22,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":364.99999999999994,"height":75,"lockAspectRatio":false,"lockShape":false,"order":12,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":7.3,"y":0,"rotation":0,"id":24,"uid":null,"width":350.3999999999999,"height":32,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(67, 67, 67); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">Node node = new Node(Thread.currentThread(), mode)\n</span></p><p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(67, 67, 67); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">构造一个 node</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":872.5,"y":480,"rotation":0,"id":19,"uid":"com.gliffy.shape.basic.basic_v1.default.rectangle","width":180,"height":75,"lockAspectRatio":false,"lockShape":false,"order":10,"graphic":{"type":"Shape","Shape":{"tid":"com.gliffy.stencil.rectangle.basic_v1","strokeWidth":2,"strokeColor":"#333333","fillColor":"#FFFFFF","gradient":false,"dropShadow":false,"state":0,"shadowX":0,"shadowY":0,"opacity":1}},"children":[{"x":3.5999999999999988,"y":0,"rotation":0,"id":21,"uid":null,"width":172.79999999999995,"height":16,"lockAspectRatio":false,"lockShape":false,"order":"auto","graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(67, 67, 67); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">addWaiter(Node mode)</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null}],"linkMap":[]},{"x":42,"y":1014,"rotation":0,"id":160,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":307,"height":16,"lockAspectRatio":false,"lockShape":false,"order":86,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">2.  线程的不同状态是如何起作用和影响的 ？</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":44,"y":1080,"rotation":0,"id":161,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":369.99999999999994,"height":32,"lockAspectRatio":false,"lockShape":false,"order":87,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">3. node 队列维护 pre 和 next的用意分别是什么 ？</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":46,"y":1140,"rotation":0,"id":162,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":369.99999999999994,"height":16,"lockAspectRatio":false,"lockShape":false,"order":88,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">4. cancellation 有什么影响 ， 如何影响</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":48,"y":1200,"rotation":0,"id":163,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":369.99999999999994,"height":16,"lockAspectRatio":false,"lockShape":false,"order":89,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">5. 虚拟头节点 ？ </span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":50,"y":1250,"rotation":0,"id":164,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":369.99999999999994,"height":16,"lockAspectRatio":false,"lockShape":false,"order":90,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">6. 等待队列原理如何生效  ？ </span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":52,"y":1320,"rotation":0,"id":165,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":369.99999999999994,"height":32,"lockAspectRatio":false,"lockShape":false,"order":91,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">7. 状态值是如何产生影响的  ？ \n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">    signal   cancelled   condition  propagate   0 </span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":54,"y":1400,"rotation":0,"id":166,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":390,"height":80,"lockAspectRatio":false,"lockShape":false,"order":92,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">8. 等待队列只有在排他模式下  ？ \n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">    And because conditions can only be exclusive,\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">    we save a field by using special value to indicate shared\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">    mode.\n</span></p><p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">   共享模式   nextWaiter = SHARED</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":54,"y":1540,"rotation":0,"id":167,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":369.99999999999994,"height":16,"lockAspectRatio":false,"lockShape":false,"order":93,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">9.  公平锁和非公平锁的区别  ， 及如何实现</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1867.5,"y":665,"rotation":0,"id":168,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":260,"height":80,"lockAspectRatio":false,"lockShape":false,"order":94,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">能够实现锁的关键就在这里 ， 因为调用 lock 方法后 ，线程执行到这里进入了  for 的死循环中 。只有在循环中 tryAcquire 成功。表示获取到锁。线程才能继续向下执行同步代码块。</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":1821.5,"y":630,"rotation":0,"id":54,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":142,"height":20,"lockAspectRatio":false,"lockShape":false,"order":33,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:center;\"><span style=\"font-size: 18px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; font-weight: bold; line-height: 20.5px;\">☆ ☆ ☆</span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":56,"y":1610,"rotation":0,"id":170,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":369.99999999999994,"height":16,"lockAspectRatio":false,"lockShape":false,"order":95,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">10.  如果忘记调用 lock.unlock() 会发生什么 </span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]},{"x":56,"y":1753,"rotation":0,"id":173,"uid":"com.gliffy.shape.basic.basic_v1.default.text","width":369.99999999999994,"height":32,"lockAspectRatio":false,"lockShape":false,"order":97,"graphic":{"type":"Text","Text":{"tid":null,"valign":"middle","overflow":"none","vposition":"none","hposition":"none","html":"<p style=\"text-align:left;\"><span style=\"font-size: 14px; font-family: Arial; color: rgb(255, 0, 0); white-space: pre-wrap; text-decoration: none; line-height: 16.5px;\">11.  shouldParkAfterFailedAcquire  找到一个安全点休息 ？ 前一个线程是如何唤醒后一个线程的 ？ </span></p>","paddingLeft":2,"paddingRight":2,"paddingBottom":2,"paddingTop":2}},"children":null,"linkMap":[]}],"background":"#FFFFFF","width":2178,"height":2365,"maxWidth":5000,"maxHeight":5000,"nodeIndex":174,"autoFit":true,"exportBorder":false,"gridOn":true,"snapToGrid":true,"drawingGuidesOn":true,"pageBreaksOn":false,"printGridOn":false,"printPaper":"LETTER","printShrinkToFit":false,"printPortrait":true,"shapeStyles":{"com.gliffy.shape.basic.basic_v1.default":{"fill":"#FFFFFF","stroke":"#333333","strokeWidth":2},"com.gliffy.shape.flowchart.flowchart_v1.default":{"fill":"#FFFFFF","stroke":"#333333","strokeWidth":2}},"lineStyles":{"global":{"endArrow":1}},"textStyles":{},"themeData":null}}